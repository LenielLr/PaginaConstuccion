<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crear Proyecto - Constructora Premium</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üèóÔ∏è</text></svg>">
</head>

<body>
    <header>
        <h1>‚ûï Crear Nuevo Proyecto</h1>
        <nav>
            <a href="{{ url_for('home') }}">üè† Volver a Proyectos</a>
        </nav>
    </header>

    <main>
        <form action="{{ url_for('agregar') }}" method="POST" enctype="multipart/form-data" class="formulario">
            <div class="form-header">
                <h2>üìù Informaci√≥n del Proyecto</h2>
                <p style="color: var(--text-secondary); font-size: 0.95rem; margin-top: 0.5rem;">
                    Completa los datos y agrega todas las im√°genes y videos del proyecto
                </p>
            </div>

            <div class="form-group">
                <label for="nombre">
                    <span class="label-icon">üèóÔ∏è</span>
                    Nombre del Proyecto
                    <span class="required">*</span>
                </label>
                <input type="text" id="nombre" name="nombre" placeholder="Ej: Edificio Residencial Plaza Mayor" required>
            </div>

            <div class="form-group">
                <label for="descripcion">
                    <span class="label-icon">üìã</span>
                    Descripci√≥n
                    <span class="required">*</span>
                </label>
                <textarea id="descripcion" name="descripcion" rows="5" placeholder="Describe el proyecto: caracter√≠sticas, materiales, √°rea construida, etc." required></textarea>
                <small class="form-hint">Proporciona una descripci√≥n detallada del proyecto</small>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="ubicacion">
                        <span class="label-icon">üìç</span>
                        Ubicaci√≥n
                        <span class="optional">(Opcional)</span>
                    </label>
                    <input type="text" id="ubicacion" name="ubicacion" placeholder="Ej: Av. Principal 123, Ciudad">
                </div>

                <div class="form-group">
                    <label for="cliente">
                        <span class="label-icon">üë§</span>
                        Cliente
                        <span class="optional">(Opcional)</span>
                    </label>
                    <input type="text" id="cliente" name="cliente" placeholder="Ej: Inmobiliaria XYZ">
                </div>
            </div>

            <div class="form-divider">
                <span>Agregar Im√°genes y Videos</span>
            </div>

            <div class="form-group">
                <label for="archivos">
                    <span class="label-icon">üì§</span>
                    Subir Archivos M√∫ltiples
                    <span class="required">*</span>
                </label>
                <div class="file-input-wrapper">
                    <input type="file" id="archivos" name="archivos" accept="image/*,video/*" multiple required>
                    <div class="file-input-display">
                        <span class="file-icon">üìÅ</span>
                        <span class="file-text">Selecciona im√°genes y/o videos (m√∫ltiples archivos)</span>
                        <span class="file-button">Explorar</span>
                    </div>
                </div>
                <small class="form-hint">
                    üí° Puedes seleccionar m√∫ltiples archivos manteniendo presionado Ctrl (Windows) o Cmd (Mac)<br>
                    üì∏ Formatos de imagen: JPG, PNG, GIF<br>
                    üé• Formatos de video: MP4, MOV, WEBM
                </small>
            </div>

            <div id="preview-container" class="preview-container"></div>

            <div class="form-actions">
                <button type="submit" class="btn-submit">
                    <span>üíæ Guardar Proyecto</span>
                </button>
                <a href="{{ url_for('home') }}" class="btn-cancel">
                    <span>‚ùå Cancelar</span>
                </a>
            </div>
        </form>
    </main>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
    <script>
        // Script espec√≠fico para previsualizaci√≥n de archivos
        const fileInput = document.getElementById('archivos');
        const fileText = document.querySelector('.file-text');
        const previewContainer = document.getElementById('preview-container');

        fileInput.addEventListener('change', function() {
            const files = this.files;
            previewContainer.innerHTML = ""; // Limpiar previos

            if (files.length > 0) {
                let fileNames = [];
                for (const file of files) {
                    fileNames.push(file.name);

                    const fileType = file.type.split('/')[0];
                    const fileURL = URL.createObjectURL(file);
                    const preview = document.createElement(fileType === 'video' ? 'video' : 'img');

                    preview.src = fileURL;
                    preview.classList.add('preview-item');
                    if (fileType === 'video') preview.controls = true;

                    previewContainer.appendChild(preview);
                }

                fileText.textContent = `${fileNames.length} archivo(s) seleccionado(s)`;
            } else {
                fileText.textContent = 'Selecciona im√°genes y/o videos (m√∫ltiples archivos)';
            }
        });
    </script>
</body>
</html>